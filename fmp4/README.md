### 前端MSE播放 和对 FMP4的理解

目前网站有个视频点播服务，采用前端视频上传后端云存储，自动转码成MP4格式(七牛云)


初始化 ： 前端MSE播放 请求视频信息 标题 大小 时长 编码(就是MP4)  可能会有多个分辨率

现在设计想法：想实现实时 FMP4切片 

1. 根据初始化自行组装 FMP4的init 

2.1 根据起始事件 0秒 ~ N秒(间隔 5 - 30 秒不等) 后端实时切片音频 视频流返回

2.2 广告10秒，采用FMP4相同的编码 下次请求时间 变成 0秒 ~ N秒 + skip(10) 后端不是真的跳10秒，而是 帮真是分割片段时间+10秒

3. 前端喂数据给MSE

fmp4 头等于 ftyp + moov 

fmp4 片段 moof + mdat


// 疑问1 我手动切片的 8 个切片 我换了加载顺序，视频依旧按正常顺序播放
说明：视频不是按照加载顺序播放的，而是根据片段内的 时间线加载的

// 疑问2 手动拼接 ftyp + moov 是否可行 在已知 视频信息 分辨率 时长 大小的情况下；


// fmp4
ftyp size=36(8+28) curTotalSize=36
moov size=1227(8+1219) curTotalSize=1263

moof size=1252(8+1244) curTotalSize=2515
mdat size=65895(8+65887) curTotalSize=68410
moof size=612(8+604) curTotalSize=69022
mdat size=100386(8+100378) curTotalSize=169408
